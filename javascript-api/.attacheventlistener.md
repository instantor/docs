---
description: THE PAGE NEEDS UPDATE. ADD DESCRIPTIONS
---

# .attachEventListener

The **attachEventListener** method is an **optional** method for attaching callback functions to specific iframe events.

```javascript
instantor.attachEventListener(eventName, callbackFunction(payload))
```

This method attaches an event listener with a specified callback function to the specified event, **eventName**. When triggered, the callback function is called with an event **payload.** 

<table>
  <thead>
    <tr>
      <th style="text-align:left">eventName (string)</th>
      <th style="text-align:left">payload</th>
      <th style="text-align:left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left"><b>load</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>status: true | false</p>
        <p>}</p>
      </td>
      <td style="text-align:left">When the status returns &quot;true&quot;, the iFrame is ready to accept
        end-user input. In most cases this will be to select a bank for sign-in.</td>
    </tr>
    <tr>
      <td style="text-align:left"><b>processEnd</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>string, example: &quot;process-finished&quot;</p>
        <p>}</p>
      </td>
      <td style="text-align:left">Triggered when the process finishes, either successful or unsuccesful.
        The processEnd event will produce either a &quot;process-finished&quot;
        or &quot;process-error&quot; string.</td>
    </tr>
    <tr>
      <td style="text-align:left"><b>chooseBank</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>bankAbbreviation: &quot;bank-abb&quot;,</p>
        <p>bank-id: &quot;bank id&quot;,</p>
        <p>sessionID: &quot;sessionID&quot;</p>
        <p>}</p>
      </td>
      <td style="text-align:left">This event is triggered when an end-user selects a bank. It can also be
        used to forward an end-user to a specific bank login page by a customer
        that would like to build a custom UI.</td>
    </tr>
    <tr>
      <td style="text-align:left"><b>error</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>message: &apos;message&apos;, status: &apos;fatal&apos; | &apos;non-fatal&apos;</p>
        <p>}</p>
      </td>
      <td style="text-align:left">Triggered if an error condition occurs &#x2013; usually during iframe
        loading. Level is optional, can be either fatal or non-fatal. If fatal,
        process is terminated, and will not continue. non-fatal error level will
        continue process execution. Message contains error description.</td>
    </tr>
    <tr>
      <td style="text-align:left"><b>displayChange</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>display:</p>
        <p>&apos;bankChooser&apos; |</p>
        <p>&apos;bankLogin&apos;</p>
        <p>}</p>
      </td>
      <td style="text-align:left">This event is triggered when the iframe changes content, with the current
        display as payload. A bankLogin payload is returned when the iframe renders
        the bank login form, a bankChooser payload is returned when the iFrame
        renders the bank-chooser.</td>
    </tr>
  </tbody>
</table>### Example

An example on how to subscribe to one event

```javascript
try {
  const instantor = new Instantor('produktKey.de')
  
  instantor.attachEventListener('error', function(payload) {
  })
  
  instantor.load('#itor');
} catch(err) {/* Handle error */}
```

