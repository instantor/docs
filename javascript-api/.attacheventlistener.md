---
description: THE PAGE NEEDS UPDATE. ADD DESCRIPTIONS
---

# .attachEventListener

The **attachEventListener** method is an **optional** method for attaching callback functions to specific iframe events.

```javascript
instantor.attachEventListener(eventName, callbackFunction(payload))
```

This method attaches an event listener with a specified callback function to the specified event, **eventName**. When triggered, the callback function is called with an event **payload.** 

<table>
  <thead>
    <tr>
      <th style="text-align:left">eventName (string)</th>
      <th style="text-align:left">payload</th>
      <th style="text-align:left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left"><b>ready</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>status: true | false</p>
        <p>}</p>
      </td>
      <td style="text-align:left">HAMMER OUT EXACTLY WHERE THIS IS EMITTED</td>
    </tr>
    <tr>
      <td style="text-align:left"><b>processEnd</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>string, example: &quot;process-finished&quot;</p>
        <p>}</p>
      </td>
      <td style="text-align:left">Triggered when the process finishes. Contains string representation of
        process end level. See .listener method for more info.</td>
    </tr>
    <tr>
      <td style="text-align:left"><b>chooseBank</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>bankAbbreviation: &quot;bank-abb&quot;,</p>
        <p>bank-id: &quot;bank id&quot;,</p>
        <p>sessionID: &quot;sessionID&quot;</p>
        <p>}</p>
      </td>
      <td style="text-align:left">Triggered when end-user selects a bank. <em>NOTE: DISCUSS THE RELEVANCE OF bankAbbreviation<b>. </b>I VOTE REMOVE THAT BANKABBR</em>
      </td>
    </tr>
    <tr>
      <td style="text-align:left"><b>error</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>status: true | false</p>
        <p>}</p>
      </td>
      <td style="text-align:left">
        <p>Triggered when a process within the frame starts. Status reflects success
          state: <code>true</code> for success, <code>false</code> for failure.</p>
        <p>Event is triggered each time the end-user clicks a submit button inside
          our iFrame. When a bank login has more than one step, this will be triggered
          on each shown step so it can be triggered multiple times per login attempt.
          When we trigger &quot;processStart&quot; we have no way of knowing if that
          is a successful login or not. We just log that credentials were sent. <em>NOTE: REWRITE THIS. BASICALLY, THIS IS A LOADING INDICATOR AND I VOTE REMOVE / CHANGE IT SOMEHOW</em>
        </p>
      </td>
    </tr>
    <tr>
      <td style="text-align:left"><b>displayChange</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>display:</p>
        <p>&apos;bankChooser&apos; |</p>
        <p>&apos;bankLogin&apos;</p>
        <p>}</p>
      </td>
      <td style="text-align:left">This event is triggered when the iframe changes content, with the current
        display as payload.</td>
    </tr>
  </tbody>
</table>### Example

Example subscribing to one event

```javascript
try {
  const instantor = new Instantor('produktKey.de')
  
  instantor.attachEventListener('ready', function(payload) {
    payload.status ? 
    console.log('Frame ready for input from end-user') :
    console.log('Frame is loading, not accepting input from end-user')
  })
  
  instantor.load('#itor');
} catch(err) {/* Handle error */}
```

Example subscribing to a couple of selected events

```javascript
try {
  const instantor = new Instantor('produktKey.de')
  
    function handleFrameEvent(eventName, payload) {
        console.log(`'${eventName}' event received from frame with payload: `, payload)
    }
    /* frame events we want to listen to */
    var events = [
        'load',
        'ready',
        'reload',
    ]
    
    events.forEach(function (eventName) {
        instantor.attachEventListener(eventName, (data) => { 
            handleFrameEvent(eventName, data) 
        })
        })
    })
  
  instantor.load('#itor');
} catch(err) {/* Handle error */}
```

