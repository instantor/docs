# .attachEventListener

The **attachEventListener** method is an **optional** method for attaching callback functions to specific iframe events.

```javascript
instantor.attachEventListener(eventName, callbackFunction(payload))
```

This method attaches an event listener with a specified callback function to the specified event, **eventName**. When triggered, the callback function is called with an event **payload.** 

<table>
  <thead>
    <tr>
      <th style="text-align:left">eventName (string)</th>
      <th style="text-align:left">payload</th>
      <th style="text-align:left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left"><b>load</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>status: true | false</p>
        <p>}</p>
      </td>
      <td style="text-align:left">When the status returns &quot;true&quot;, the iFrame is ready to accept
        end-user input. In most cases this will be to select a bank for sign-in.</td>
    </tr>
    <tr>
      <td style="text-align:left"><b>processEnd</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>string, example: &quot;process-finished&quot;</p>
        <p>}</p>
      </td>
      <td style="text-align:left">Triggered when the process finishes, the payload contains a representation
        of the result. The payload may contain a &quot;process-finished&quot;,
        &quot;process-error&quot; or &quot;invalid-login&quot; string.</td>
    </tr>
    <tr>
      <td style="text-align:left"><b>chooseBank</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>bankAbbreviation: &quot;bank-abb&quot;,</p>
        <p>bank-id: &quot;bank id&quot;,</p>
        <p>sessionID: &quot;sessionID&quot;</p>
        <p>}</p>
      </td>
      <td style="text-align:left">This event is triggered when an end-user selects a bank. The payload contains
        a &quot;bank-abb&quot; (bank abbriviation), &quot;bank id&quot; (unique
        bank ID) and &quot;sessionID&quot; (unique sessionID).</td>
    </tr>
    <tr>
      <td style="text-align:left"><b>error</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>message: &apos;message&apos;</p>
        <p>}</p>
      </td>
      <td style="text-align:left">Triggered when an error occurs during the process. The message payload
        contains a description of the error type.</td>
    </tr>
    <tr>
      <td style="text-align:left"><b>displayChange</b>
      </td>
      <td style="text-align:left">
        <p>{</p>
        <p>display:</p>
        <p>&apos;bankChooser&apos; |</p>
        <p>&apos;bankLogin&apos;</p>
        <p>}</p>
      </td>
      <td style="text-align:left">This event is triggered when the iframe changes content, with the current
        display as payload. A bankLogin payload is returned when the iframe renders
        the bank login form, a bankChooser payload is returned when the iFrame
        renders the bank-chooser.</td>
    </tr>
  </tbody>
</table>### Example

An example on how to subscribe to one event

```javascript
try {
  const instantor = new Instantor('produktKey.de')
  
  instantor.attachEventListener('error', function(payload) {
  })
  
  instantor.load('#itor');
} catch(err) {/* Handle error */}
```

